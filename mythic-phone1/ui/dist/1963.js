"use strict";(self.webpackChunkmythic_phone=self.webpackChunkmythic_phone||[]).push([[1963],{11963:(e,r,t)=>{t.r(r),t.d(r,{BumpAdvert:()=>D,CreateAdvert:()=>f,DeleteAdvert:()=>h,UpdateAdvert:()=>y,YP_ACTIONS:()=>v,default:()=>_,initialState:()=>m,validateAdvertData:()=>T,yellowPagesReducer:()=>R});var n=t(74360),a=t(18801),o=t(68175),i=t(28407),u=t(70232),c=t.n(u),s=t(61541);function p(e){var r=function(e,r){if("object"!=(0,n.A)(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,r||"default");if("object"!=(0,n.A)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==(0,n.A)(r)?r:r+""}function d(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?d(Object(t),!0).forEach((function(r){(0,o.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var v={CREATE_ADVERT:"YP_CREATE_ADVERT",UPDATE_ADVERT:"YP_UPDATE_ADVERT",DELETE_ADVERT:"YP_DELETE_ADVERT",BUMP_ADVERT:"YP_BUMP_ADVERT",SET_LOADING:"YP_SET_LOADING",SET_ERROR:"YP_SET_ERROR"},A=function(e){return{type:v.SET_LOADING,payload:e}},E=function(e){return{type:v.SET_ERROR,payload:e}},f=function(e,r,t){return function(){var e=(0,i.A)(c().mark((function e(n){var a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(A(!0)),e.prev=1,e.next=4,s.A.send("CreateAdvert",l(l({},r),{},{createdAt:Date.now(),lastUpdated:Date.now()}));case 4:a=e.sent,n({type:v.CREATE_ADVERT,payload:a}),t&&t(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n(E("Failed to create advertisement")),console.error("Create advert error:",e.t0);case 13:return e.prev=13,n(A(!1)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(r){return e.apply(this,arguments)}}()},y=function(e,r,t){return function(){var e=(0,i.A)(c().mark((function e(n){var a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(A(!0)),e.prev=1,e.next=4,s.A.send("UpdateAdvert",l(l({},r),{},{lastUpdated:Date.now()}));case 4:a=e.sent,n({type:v.UPDATE_ADVERT,payload:a}),t&&t(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n(E("Failed to update advertisement")),console.error("Update advert error:",e.t0);case 13:return e.prev=13,n(A(!1)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})));return function(r){return e.apply(this,arguments)}}()},h=function(e,r){return function(){var t=(0,i.A)(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(A(!0)),t.prev=1,t.next=4,s.A.send("DeleteAdvert",{id:e});case 4:n({type:v.DELETE_ADVERT,payload:e}),r&&r(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),n(E("Failed to delete advertisement")),console.error("Delete advert error:",t.t0);case 12:return t.prev=12,n(A(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()},D=function(e,r,t){return function(){var e=(0,i.A)(c().mark((function e(n){var a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(A(!0)),e.prev=1,e.next=4,s.A.send("UpdateAdvert",l(l({},r),{},{time:Date.now(),bumpedAt:Date.now()}));case 4:a=e.sent,n({type:v.BUMP_ADVERT,payload:a}),t&&t(),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),n(E("Failed to bump advertisement")),console.error("Bump advert error:",e.t0),t&&t(e.t0);case 14:return e.prev=14,n(A(!1)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,9,14,17]])})));return function(r){return e.apply(this,arguments)}}()},T=function(e){var r=[];return e.title&&0!==e.title.trim().length||r.push("Title is required"),e.short&&0!==e.short.trim().length||r.push("Short description is required"),e.categories&&0!==e.categories.length||r.push("At least one category is required"),e.price&&isNaN(Number(e.price))&&r.push("Price must be a valid number"),r},m={loading:!1,error:null,adverts:{},categories:[],currentUserAd:null},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case v.SET_LOADING:return l(l({},e),{},{loading:r.payload});case v.SET_ERROR:return l(l({},e),{},{error:r.payload});case v.CREATE_ADVERT:return l(l({},e),{},{adverts:l(l({},e.adverts),{},(0,o.A)({},r.payload.id,r.payload)),error:null});case v.UPDATE_ADVERT:return l(l({},e),{},{adverts:l(l({},e.adverts),{},(0,o.A)({},r.payload.id,l(l({},e.adverts[r.payload.id]),r.payload))),error:null});case v.DELETE_ADVERT:var t=e.adverts,n=r.payload,i=(t[n],(0,a.A)(t,[n].map(p)));return l(l({},e),{},{adverts:i,error:null});case v.BUMP_ADVERT:return l(l({},e),{},{adverts:l(l({},e.adverts),{},(0,o.A)({},r.payload.id,l(l({},e.adverts[r.payload.id]),{},{time:r.payload.time,bumpedAt:r.payload.bumpedAt}))),error:null});default:return e}};const _=R}}]);