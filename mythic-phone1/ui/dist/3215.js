"use strict";(self.webpackChunkmythic_phone=self.webpackChunkmythic_phone||[]).push([[3215],{23215:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var r=n(68175),a=n(28407),l=n(73925),o=n(64180),c=n(70232),i=n.n(c),s=n(55429),u=n(15647),m=n(64965),d=n(23805),p=n(386),f=n(94356),b=n(57936),E=n(57527),A=n(1310),y=n(56977),v=n(20500),h=n(23753),g=n(42262),k=n(74268),N=n(40279),x=n(46134),w=n(6831),I=n(93078),C=n(93057),S=n(64926),O=n(75586),D=n(48285),W=n(29506),G=n(51959),P=n(59530),L=n(98433),j=n(69796),T=n(61541),F=n(23470),U=n(987);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=(0,G.A)((function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main},header:{background:e.palette.primary.main,fontSize:20,padding:15,lineHeight:"45px",height:78},content:{height:"83.6%",overflowY:"auto",overflowX:"hidden","&::-webkit-scrollbar":{width:6},"&::-webkit-scrollbar-thumb":{background:"#ffffff52"},"&::-webkit-scrollbar-thumb:hover":{background:e.palette.primary.main},"&::-webkit-scrollbar-track":{background:"transparent"}},headerAction:{textAlign:"right","&:hover":{color:e.palette.text.main,transition:"color ease-in 0.15s"}},workplaceAction:{fontSize:14},management:{fontSize:14,color:"gold",marginRight:5},item:{borderBottom:"1px solid ".concat(e.palette.border.divider),"&:first-of-type":{borderTop:"1px solid ".concat(e.palette.border.divider)}},editorField:{marginBottom:15},emptyMsg:{width:"100%",textAlign:"center",fontSize:20,fontWeight:"bold",marginTop:"25%"},ownerBtn:{display:"block","&:not(:last-of-type)":{marginBottom:15}}}})),J=(0,d.Ay)((function(e){return s.createElement(p.A,(0,o.A)({TransitionProps:{unmountOnExit:!0},disableGutters:!0,elevation:0,square:!0},e))}))((function(e){var t=e.theme;return{background:"transparent",borderBottom:"1px solid ".concat(t.palette.border.divider),"&:before":{display:"none"}}})),_=(0,d.Ay)((function(e){return s.createElement(f.A,(0,o.A)({expandIcon:s.createElement(P.g,{icon:["fas","caret-down"]})},e))}))((function(e){var t=e.theme;return{width:"100%",background:"transparent",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper":{fontSize:20,color:t.palette.primary.main,transform:"rotate(-90deg)",transition:"0.25s","&.Mui-expanded":{transform:"rotate(0deg)"}},"& .MuiAccordionSummary-content":{margin:0,marginLeft:t.spacing(1)}}})),z=(0,d.Ay)(b.A)((function(e){return{padding:e.theme.spacing(0),borderTop:"1px solid rgba(0, 0, 0, .125)"}}));const H=function(e){var t=e.refreshRoster,n=e.jobData,r=e.playerJob,o=R(),c=(0,F.MW)(),d=(0,m.W6)(),p=((0,F.e9)(),(0,u.d4)((function(e){return e.data.data.player}))),f=(0,u.d4)((function(e){return e.data.data.NamedJobPermissions})),b=p.SID==(null==n?void 0:n.Owner),G={Id:"",Name:"",Level:1,Permissions:Object()},M=(0,s.useState)(!1),H=(0,l.A)(M,2),V=H[0],q=H[1],Y=(0,s.useState)(!1),X=(0,l.A)(Y,2),K=X[0],Q=X[1],Z=(0,s.useState)(!1),$=(0,l.A)(Z,2),ee=$[0],te=$[1],ne=(0,s.useState)(null),re=(0,l.A)(ne,2),ae=re[0],le=re[1],oe=(0,s.useState)(!1),ce=(0,l.A)(oe,2),ie=ce[0],se=ce[1],ue=(0,s.useState)(!1),me=(0,l.A)(ue,2),de=me[0],pe=me[1],fe=(0,s.useState)(null),be=(0,l.A)(fe,2),Ee=be[0],Ae=be[1],ye=(0,s.useState)(null),ve=(0,l.A)(ye,2),he=ve[0],ge=ve[1],ke=(0,s.useState)(!1),Ne=(0,l.A)(ke,2),xe=(Ne[0],Ne[1],(0,s.useState)(!1)),we=(0,l.A)(xe,2),Ie=we[0],Ce=we[1],Se=(0,s.useState)(!1),Oe=(0,l.A)(Se,2),De=Oe[0],We=Oe[1],Ge=function(){d.goBack()},Pe=function(){var e=(0,a.A)(i().mark((function e(n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),pe(!0),e.prev=2,e.next=5,T.A.send("EditWorkplace",{JobId:Ee.JobId,WorkplaceId:Ee.Id,NewName:Ee.Name});case 5:return e.next=7,e.sent.json();case 7:if(!(r=e.sent).success){e.next=13;break}c("Workplace Updated"),t(),e.next=22;break;case 13:e.t0=r.code,e.next="INVALID_PERMISSIONS"===e.t0?16:"MISSING_JOB"===e.t0?18:(e.t0,20);break;case 16:return c("Not Authorized"),e.abrupt("break",22);case 18:return c("Workplace Doesn't Exist"),e.abrupt("break",22);case 20:return c("Unable to Update Workplace"),e.abrupt("break",22);case 22:e.next=28;break;case 24:e.prev=24,e.t1=e.catch(2),console.log(e.t1),c("Unable to Update Workplace");case 28:pe(!1);case 29:case"end":return e.stop()}}),e,null,[[2,24]])})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=(0,a.A)(i().mark((function e(n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),pe(!0),e.prev=2,e.next=5,T.A.send(he.edit?"EditGrade":"CreateGrade",he);case 5:return e.next=7,e.sent.json();case 7:if(!(r=e.sent).success){e.next=13;break}c("Grade ".concat(he.edit?"Updated":"Created")),t(),e.next=20;break;case 13:e.t0=r.code,e.next="ERROR"===e.t0?16:"INVALID_PERMISSIONS"===e.t0?18:16;break;case 16:return c("Unable To ".concat(he.edit?"Update":"Create"," Grade")),e.abrupt("break",20);case 18:return c("Not Authorized"),e.abrupt("break",20);case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(2),console.log(e.t1),c("Unable to ".concat(he.edit?"Update":"Create"," Grade"));case 26:pe(!1);case 27:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=(0,a.A)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce(!1),pe(!0),e.prev=2,e.next=5,T.A.send("DeleteGrade",he);case 5:return e.next=7,e.sent.json();case 7:if(!(n=e.sent).success){e.next=13;break}c("Grade Deleted"),t(),e.next=24;break;case 13:e.t0=n.code,e.next="INVALID_PERMISSIONS"===e.t0?16:"JOB_OCCUPIED"===e.t0?18:"MISSING_JOB"===e.t0?20:(e.t0,22);break;case 16:return c("Not Authorized"),e.abrupt("break",24);case 18:return c("Cannot Delete a Grade With Employees In"),e.abrupt("break",24);case 20:return c("Grade Doesn't Exist"),e.abrupt("break",24);case 22:return c("Unable to Delete Grade"),e.abrupt("break",24);case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(2),console.log(e.t1),c("Unable to Delete Grade");case 30:pe(!1);case 31:case"end":return e.stop()}}),e,null,[[2,26]])})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=(0,a.A)(i().mark((function e(n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),b){e.next=3;break}return e.abrupt("return");case 3:return pe(!0),e.prev=4,e.next=7,T.A.send("RenameCompany",n.target.name.value);case 7:return e.next=9,e.sent.json();case 9:if(!(r=e.sent).success){e.next=15;break}c("Company Name Updated"),t(),e.next=22;break;case 15:e.t0=r.code,e.next="INVALID_PERMISSIONS"===e.t0?18:(e.t0,20);break;case 18:return c("Not Authorized"),e.abrupt("break",22);case 20:return c("Unable To Edit Company"),e.abrupt("break",22);case 22:e.next=28;break;case 24:e.prev=24,e.t1=e.catch(4),console.log(e.t1),c("Unable to Edit Company");case 28:pe(!1);case 29:case"end":return e.stop()}}),e,null,[[4,24]])})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=(0,a.A)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),b){e.next=3;break}return e.abrupt("return");case 3:return pe(!0),e.prev=4,e.next=7,T.A.send("DisbandCompany");case 7:return e.next=9,e.sent.json();case 9:if(!(n=e.sent).success){e.next=15;break}c("Company Has Been Deleted"),Ge(),e.next=22;break;case 15:e.t0=n.code,e.next="INVALID_PERMISSIONS"===e.t0?18:(e.t0,20);break;case 18:return c("Not Authorized"),e.abrupt("break",22);case 20:return c("Unable to Disband Company"),e.abrupt("break",22);case 22:e.next=28;break;case 24:e.prev=24,e.t1=e.catch(4),console.log(e.t1),c("Unable to Disband Company");case 28:te(!1),pe(!1);case 30:case"end":return e.stop()}}),e,null,[[4,24]])})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=(0,a.A)(i().mark((function e(n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),b){e.next=3;break}return e.abrupt("return");case 3:return pe(!0),e.prev=4,e.next=7,T.A.send("TransferCompany",{target:ae.target});case 7:return e.next=9,e.sent.json();case 9:if(!(r=e.sent).success){e.next=15;break}c("Company Ownership Has Been Transfered"),t(),e.next=22;break;case 15:e.t0=r.code,e.next="INVALID_PERMISSIONS"===e.t0?18:(e.t0,20);break;case 18:return c("Not Authorized"),e.abrupt("break",22);case 20:return c("Unable to Disband Company"),e.abrupt("break",22);case 22:e.next=28;break;case 24:e.prev=24,e.t1=e.catch(4),console.log(e.t1),c("Unable To Transfer Company Ownership");case 28:se(!1),le(null),pe(!1);case 31:case"end":return e.stop()}}),e,null,[[4,24]])})));return function(t){return e.apply(this,arguments)}}();return s.createElement("div",{className:o.wrapper},s.createElement(E.A,{position:"static",className:o.header},s.createElement(A.Ay,{container:!0},s.createElement(A.Ay,{item:!0,xs:7},s.createElement(L.A,{lines:1},n.Name)),s.createElement(A.Ay,{item:!0,xs:5,className:o.headerAction},b&&s.createElement(y.A,{title:"Company Owner Menu"},s.createElement(v.A,{onClick:function(){return q(!0)}},s.createElement(P.g,{icon:["fas","gear"]}))),!n.Workplaces&&s.createElement(y.A,{title:"Create New Grade"},s.createElement(v.A,{onClick:function(){return ge(B({JobId:n.Id,WorkplaceId:null},G))}},s.createElement(P.g,{icon:["fas","plus"]}))),s.createElement(y.A,{title:"Force Refresh"},s.createElement(v.A,{onClick:function(){return t()},disabled:de},s.createElement(P.g,{className:"fa ".concat(de?"fa-spin":""),icon:["fas","arrows-rotate"]}))),s.createElement(y.A,{title:"Home"},s.createElement(v.A,{onClick:Ge},s.createElement(P.g,{icon:["fas","house"]})))))),s.createElement("div",{className:o.content},n.Workplaces&&n.Workplaces.length>0?n.Workplaces.map((function(e){return s.createElement(J,{key:"wp-".concat(e.Id),expanded:De==e.Id,onChange:(t=e.Id,function(e,n){We(!!n&&t)})},s.createElement(h.A,{style:{width:"100%"}},s.createElement(_,{expandIcon:s.createElement(P.g,{icon:["fas","caret-down"]})},s.createElement(g.A,{dense:!0},s.createElement(k.Ay,null,s.createElement(N.A,{primary:e.Name,secondary:"".concat(e.Grades.length," Grades")}))))),s.createElement(z,null,s.createElement(g.A,null,s.createElement(k.Ay,null,s.createElement(A.Ay,{container:!0,style:{textAlign:"center"}},s.createElement(A.Ay,{item:!0,xs:6},s.createElement(y.A,{title:"Create New Grade"},s.createElement(v.A,{onClick:function(){return ge(B(B({},G),{},{JobId:n.Id,WorkplaceId:e.Id}))},className:o.workplaceAction},s.createElement(P.g,{icon:["fas","plus"]})))),s.createElement(A.Ay,{item:!0,xs:6},s.createElement(y.A,{title:"Edit Workplace"},s.createElement(v.A,{onClick:function(){return Ae(B(B({JobId:n.Id},e),{},{edit:!0}))},className:o.workplaceAction},s.createElement(P.g,{icon:["fas","pen-to-square"]})))))),s.createElement(k.Ay,null,s.createElement(N.A,{primary:"Grades"})),s.createElement(k.Ay,null,s.createElement(g.A,{style:{width:"100%"}},e.Grades.sort((function(e,t){return e.Level-t.Level})).map((function(t){var a;return s.createElement(k.Ay,{button:t.Level<r.Grade.Level||b,key:"grade-".concat(t.Id),onClick:t.Level<r.Grade.Level||b?function(){return ge(B(B({},t),{},{JobId:n.Id,WorkplaceId:e.Id,edit:!0}))}:null,className:o.item},s.createElement(N.A,{primary:s.createElement("span",null,(null==t||null===(a=t.Permissions)||void 0===a?void 0:a.JOB_MANAGEMENT)&&s.createElement(P.g,{className:o.management,icon:["fas","user-shield"]}),t.Name),secondary:"".concat(Object.keys(t.Permissions).filter((function(e){return t.Permissions[e]})).length," Permissions")}))})))))));var t})):s.createElement(g.A,null,s.createElement(k.Ay,null,s.createElement(N.A,{primary:"Grades"})),s.createElement(k.Ay,null,s.createElement(g.A,{style:{width:"100%"}},n.Grades.map((function(e){var t;return s.createElement(k.Ay,{button:e.Level<r.Grade.Level||b,key:"grade-".concat(e.Id),onClick:e.Level<r.Grade.Level||b?function(){return ge(B(B({},e),{},{JobId:n.Id,WorkplaceId:null,edit:!0}))}:null,className:o.item},s.createElement(N.A,{primary:s.createElement("span",null,(null==e||null===(t=e.Permissions)||void 0===t?void 0:t.JOB_MANAGEMENT)&&s.createElement(P.g,{className:o.management,icon:["fas","user-shield"]}),e.Name),secondary:"".concat(Object.keys(e.Permissions).filter((function(t){return e.Permissions[t]})).length," Permissions")}))}))))),s.createElement(U.pT,{title:"Delete Grade?",open:Ie,confirm:"Yes",decline:"No",onConfirm:je,onDecline:function(){return Ce(!1)}},s.createElement("p",null,"Deleting this grade will remove all permissions related to it and cannot be undone, are you sure?")),s.createElement(U.aF,{form:!0,formStyle:{position:"relative"},disabled:de,open:null!=Ee,title:"Edit Workplace",onAccept:Pe,onClose:function(){return Ae(null)},submitLang:"Edit"},null!=Ee&&s.createElement(s.Fragment,null,de&&s.createElement(U.aH,{static:!0,text:"Submitting"}),s.createElement(x.A,{fullWidth:!0,required:!0,label:"Workplace Name",name:"Name",disabled:de,className:o.editorField,value:Ee.Name,onChange:function(e){return Ae(B(B({},Ee),{},{Name:e.target.value}))}}))),s.createElement(U.aF,{disabled:de,form:!0,formStyle:{position:"relative"},open:null!=he,title:"".concat(null!=he&&he.edit?"Edit":"Create"," Grade"),onAccept:Le,onClose:function(){return ge(null)},onDelete:null==he||!he.edit||null!=he&&he.Owner?null:function(){return Ce(!0)},submitLang:null!=he&&he.edit?"Edit":"Create"},null!=he&&s.createElement(s.Fragment,null,de&&s.createElement(U.aH,{static:!0,text:"Submitting"}),s.createElement(x.A,{fullWidth:!0,required:!0,label:"Grade Name",name:"Name",disabled:de,className:o.editorField,value:he.Name,onChange:function(e){return ge(B(B({},he),{},{Name:e.target.value}))}}),s.createElement(j.A,{fullWidth:!0,required:!0,label:"Grade Level",helperText:"This determines where in the rank heirarchy this grade falls",name:"Level",disabled:he.Owner||de,className:o.editorField,value:he.Level,onChange:function(e){return ge(B(B({},he),{},{Level:e.target.value}))},type:"tel",isNumericString:!0,customInput:x.A}),s.createElement(w.A,{fullWidth:!0,className:o.editorField},s.createElement(I.A,{id:"grade-perms"},"Permissions"),s.createElement(C.A,{labelId:"grade-perms",multiple:!0,fullWidth:!0,disabled:he.Owner||de,value:Object.keys(he.Permissions),onChange:function(e){var t=Object();e.target.value.map((function(e){t[e]=!0})),ge(B(B({},he),{},{Permissions:t}))},input:s.createElement(S.A,{fullWidth:!0,label:"Permissions"}),renderValue:function(e){return e.map((function(e){var t,n;return null!==(t=null===(n=f[e])||void 0===n?void 0:n.name)&&void 0!==t?t:e})).join(", ")}},Object.keys(f).filter((function(e){var t,r=f[e];return!r.restricted||(null===(t=r.restricted)||void 0===t?void 0:t.includes(null==n?void 0:n.Id))})).sort().map((function(e){var t,n=f[e];return s.createElement(O.A,{key:"perm-".concat(e),value:e},s.createElement(D.A,{checked:Object.keys(he.Permissions).indexOf(e)>-1}),s.createElement(N.A,{primary:null!==(t=null==n?void 0:n.name)&&void 0!==t?t:e}))})))))),b&&s.createElement(s.Fragment,null,s.createElement(U.aF,{open:V,title:"Owner Actions",onClose:function(){return q(!1)},hideClose:!0},s.createElement(s.Fragment,null,s.createElement(W.A,{fullWidth:!0,variant:"contained",className:o.ownerBtn,onClick:function(){return Q(!0)}},"Rename Company"),s.createElement(W.A,{fullWidth:!0,variant:"contained",className:o.ownerBtn,disabled:!0,onClick:function(){return te(!0)}},"Disband Company"),s.createElement(W.A,{fullWidth:!0,variant:"contained",className:o.ownerBtn,disabled:!0,onClick:function(){return le({target:""})}},"Transfer Company Ownership"))),s.createElement(U.aF,{form:!0,formStyle:{position:"relative"},disabled:de,open:K,title:"Rename ".concat(n.Name),onAccept:Te,onClose:function(){return Q(!1)},submitLang:"Submit"},s.createElement(s.Fragment,null,de&&s.createElement(U.aH,{static:!0,text:"Submitting"}),s.createElement(x.A,{fullWidth:!0,required:!0,label:"Company Name",name:"name",disabled:de,className:o.editorField,defaultValue:n.Name}))),Boolean(ae)&&s.createElement(s.Fragment,null,s.createElement(U.aF,{form:!0,formStyle:{position:"relative"},disabled:de,open:!0,title:"Transfer ".concat(n.Name," Ownership"),onAccept:function(){return se(!0)},onClose:function(){return le(null)},submitLang:"Transfer Ownership"},s.createElement(s.Fragment,null,de&&s.createElement(U.aH,{static:!0,text:"Submitting"}),s.createElement(j.A,{fullWidth:!0,required:!0,label:"Target State ID",name:"target",className:o.editorField,value:ae.target,disabled:de,onChange:function(e){return le(B(B({},ae),{},{target:e.target.value}))},type:"tel",isNumericString:!0,customInput:x.A}))),s.createElement(U.pT,{title:"Transfer Company?",open:ie,confirm:"Yes",decline:"No",onConfirm:Ue,onDecline:function(){return se(!1)}},s.createElement("p",null,"Transfering company will transfer full ownership of company & associated assets."),s.createElement("p",null,"This is not reversable, if you proceed you will lose all control over the company."))),s.createElement(U.pT,{title:"Disband Company?",open:ee,confirm:"Yes",decline:"No",onConfirm:Fe,onDecline:function(){return te(!1)}},s.createElement("p",null,"Disbanding the company will remove everyone employed, grades, upgrades, or any data or assets associated with your company."),s.createElement("p",null,"This is not reversable, if you proceed this company will be lost forever and you"," ",s.createElement("b",null,s.createElement("i",null,"WILL NOT"))," ","get any sort of refund for anything purchased for your company.")))))}}}]);