"use strict";(self.webpackChunkmythic_phone=self.webpackChunkmythic_phone||[]).push([[2923,4031,4747,9911],{4031:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var n=r(55429),a=r(15647),l=r(42262),o=r(74268),c=r(40279),i=r(51959),s=r(39911),u=(0,i.A)((function(e){return{wrapper:{background:e.palette.secondary.dark,width:"90%",margin:"auto"}}}));const d=function(e){var t=e.jobData,r=e.playerJob,i=e.workplace,d=e.onEmployeeClick,m=(u(),(0,a.d4)((function(e){return e.com.roster}))),p=Array();return Boolean(m)&&m[t.Id]&&(p=i?m[t.Id].filter((function(e){var t;return(null===(t=e.JobData.Workplace)||void 0===t?void 0:t.Id)==i.Id})):m[t.Id]),0==p.length?null:n.createElement(l.A,null,i&&n.createElement(o.Ay,null,n.createElement(c.A,{primary:i.Name})),n.createElement(o.Ay,null,n.createElement(l.A,{style:{width:"100%"}},p.sort((function(e,t){return t.JobData.Grade.Level-e.JobData.Grade.Level})).map((function(e){return n.createElement(s.default,{key:e.SID,jobData:t,playerJob:r,employee:e,onClick:d})})))))}},39911:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var n=r(55429),a=r(15647),l=r(74268),o=r(52923),c=r(86979),i=r(40279),s=r(56977),u=r(44752),d=r(51959),m=r(59530),p=r(23470),f=(0,d.A)((function(e){return{item:{borderBottom:"1px solid ".concat(e.palette.border.divider),"&:first-child":{borderTop:"1px solid ".concat(e.palette.border.divider)}},avatar:{backgroundColor:e.palette.primary.main},myself:{fontSize:14,color:e.palette.info.main,marginRight:5},owner:{fontSize:14,color:"gold",marginRight:5}}}));const b=function(e){var t=e.jobData,r=e.playerJob,d=e.employee,b=e.onClick,E=f(),A=(0,p.Bm)(),v=((0,p.T1)(),(0,a.d4)((function(e){return e.data.data.player}))),I=v.SID==(null==t?void 0:t.Owner),y=A("JOB_MANAGEMENT",t.Id)||I,k=A("JOB_MANAGE_EMPLOYEES",t.Id)||I,g=(A("JOB_HIRE",t.Id),A("JOB_FIRE",t.Id)||I);return n.createElement(l.Ay,{className:E.item,button:((null==t?void 0:t.Owner)!=d.SID||I)&&(r.Grade.Level>d.JobData.Grade.Level||I)&&(y||k||g),onClick:((null==t?void 0:t.Owner)!=d.SID||I)&&(r.Grade.Level>d.JobData.Grade.Level||I)&&(y||k||g)?function(){return b(d)}:null},n.createElement(o.A,null,n.createElement(c.A,{className:E.avatar},n.createElement(m.g,{icon:["fas","user"]}))),n.createElement(i.A,{primary:n.createElement("span",null,v.SID==d.SID?n.createElement(s.A,{title:"You"},n.createElement("span",null,n.createElement(m.g,{className:E.myself,icon:["fas","user"]}))):(null==t?void 0:t.Owner)==d.SID?n.createElement(s.A,{title:"Business Owner"},n.createElement("span",null,n.createElement(m.g,{className:E.owner,icon:["fas","crown"]}))):null,"".concat(d.First," ").concat(d.Last)),secondary:"".concat(d.JobData.Grade.Name," - ").concat(d.Phone)}),t.Owner!=d._id&&(r.Grade.Level>d.JobData.Grade.Level||I)&&(y||k||g)&&n.createElement(u.A,null,n.createElement(m.g,{icon:["fas","pen-to-square"]})))}},52923:(e,t,r)=>{r.d(t,{A:()=>A});var n=r(86887),a=r(64180),l=r(55429),o=r(34164),c=r(7413),i=r(74024),s=r(23805),u=r(29115),d=r(52679),m=r(33899);function p(e){return(0,m.Ay)("MuiListItemAvatar",e)}(0,d.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var f=r(64922);const b=["className"],E=(0,s.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})((({ownerState:e})=>(0,a.A)({minWidth:56,flexShrink:0},"flex-start"===e.alignItems&&{marginTop:8}))),A=l.forwardRef((function(e,t){const r=(0,u.b)({props:e,name:"MuiListItemAvatar"}),{className:s}=r,d=(0,n.A)(r,b),m=l.useContext(i.A),A=(0,a.A)({},r,{alignItems:m.alignItems}),v=(e=>{const{alignItems:t,classes:r}=e,n={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,c.A)(n,p,r)})(A);return(0,f.jsx)(E,(0,a.A)({className:(0,o.A)(v.root,s),ownerState:A,ref:t},d))}))},54747:(e,t,r)=>{r.r(t),r.d(t,{default:()=>G});var n=r(68175),a=r(28407),l=r(73925),o=r(70232),c=r.n(o),i=r(55429),s=r(15647),u=r(64965),d=r(57527),m=r(1310),p=r(56977),f=r(20500),b=r(42262),E=r(74268),A=r(40279),v=r(46134),I=r(75586),y=r(51959),k=r(59530),g=r(98433),h=r(69796),D=(r(41655),r(61541)),S=r(23470),w=r(987),x=r(4031);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J=(0,y.A)((function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main,overflow:"hidden"},header:{background:e.palette.primary.main,fontSize:20,padding:15,lineHeight:"45px",height:78},headerAction:{textAlign:"right","&:hover":{color:e.palette.text.main,transition:"color ease-in 0.15s"}},item:{borderBottom:"1px solid ".concat(e.palette.border.divider)},avatar:{backgroundColor:e.palette.primary.main},editorField:{marginBottom:15},owner:{fontSize:14,color:"gold",marginRight:5},emptyMsg:{width:"100%",textAlign:"center",fontSize:20,fontWeight:"bold",marginTop:"25%"}}}));const G=function(e){var t,r,n=e.refreshRoster,o=e.loading,y=e.jobData,N=e.playerJob,G=J(),L=((0,s.wA)(),(0,u.W6)()),W=(0,S.MW)(),F=(0,S.Bm)(),C=(0,s.d4)((function(e){return e.data.data.player}));null!=y&&y.Workplaces?t={SID:"",Job:{Id:y.Id,Workplace:null==y?void 0:y.Workplaces[0],Grade:null==y||null===(r=y.Workplaces[0])||void 0===r?void 0:r.Grades[0]}}:t={SID:"",Job:{Id:y.Id,Workplace:null,Grade:null==y?void 0:y.Grades[0]}};var j=C.SID==(null==y?void 0:y.Owner),T=F("JOB_MANAGEMENT",y.Id)||j,B=F("JOB_HIRE",y.Id)||j,R=F("JOB_FIRE",y.Id)||j,M=(0,i.useState)(!1),_=(0,l.A)(M,2),P=_[0],U=_[1],H=(0,i.useState)(!1),Y=(0,l.A)(H,2),z=Y[0],Q=Y[1],V=(0,i.useState)(null),q=(0,l.A)(V,2),K=q[0],X=q[1],Z=(0,i.useState)(!1),$=(0,l.A)(Z,2),ee=$[0],te=$[1],re=function(){var e=(0,a.A)(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!K.edit){e.next=17;break}return e.prev=2,e.next=5,D.A.send("UpdateEmployee",K);case 5:return e.next=7,e.sent.json();case 7:e.sent.success?n():W("Unable To Update Employee"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),W("Unable To Update Employee");case 15:e.next=48;break;case 17:if(e.prev=17,K.SID==C.SID){e.next=41;break}return e.next=21,D.A.send("HireEmployee",K);case 21:return e.next=23,e.sent.json();case 23:if(!(r=e.sent).success){e.next=28;break}W("Employment Offer Sent"),e.next=39;break;case 28:e.t1=r.code,e.next="ERROR"===e.t1?31:"INVALID_PERMISSIONS"===e.t1?33:"INVALID_TARGET"===e.t1?35:"OUTSTANDING_OFFER"===e.t1?37:31;break;case 31:return W("Unable To Hire Employee"),e.abrupt("break",39);case 33:return W("Not Authorized"),e.abrupt("break",39);case 35:return W("Invalid or Offline State ID"),e.abrupt("break",39);case 37:return W("Person Has An Outstanding Employment Offer"),e.abrupt("break",39);case 39:e.next=42;break;case 41:W("You Cannot Hire Yourself, Dumbass");case 42:e.next=48;break;case 44:e.prev=44,e.t2=e.catch(17),console.log(e.t2),W("Unable To Hire Employee");case 48:X(null);case 49:case"end":return e.stop()}}),e,null,[[2,11],[17,44]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=(0,a.A)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.A.send("FireEmployee",K);case 3:return e.next=5,e.sent.json();case 5:if(!(t=e.sent).success){e.next=11;break}W("".concat(K.First," ").concat(K.Last," Has Been Fired")),n(),e.next=18;break;case 11:e.t0=t.code,e.next="INVALID_PERMISSIONS"===e.t0?14:(e.t0,16);break;case 14:return W("Not Authorized"),e.abrupt("break",18);case 16:return W("Unable To Fire ".concat(K.First," ").concat(K.Last)),e.abrupt("break",18);case 18:e.next=24;break;case 20:e.prev=20,e.t1=e.catch(0),console.log(e.t1),W("Unable To Fire ".concat(K.First," ").concat(K.Last));case 24:te(!1),X(null);case 26:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=(0,a.A)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,D.A.send("QuitJob",{JobId:y.Id});case 5:return e.next=7,e.sent.json();case 7:t=e.sent,W(t?"Congrats, You Quit":"Unable To Quit Job"),Q(!1),U(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0),W("Unable To Quit Job");case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();return i.createElement("div",{className:G.wrapper},i.createElement(d.A,{position:"static",className:G.header},i.createElement(m.Ay,{container:!0},i.createElement(m.Ay,{item:!0,xs:7},i.createElement(g.A,{lines:1},y.Name)),i.createElement(m.Ay,{item:!0,xs:5,className:G.headerAction},i.createElement(p.A,{title:"My Employment Details"},i.createElement(f.A,{onClick:function(){return U(!0)}},i.createElement(k.g,{icon:["fas","user"]}))),B&&i.createElement(p.A,{title:"Hire New Employee"},i.createElement(f.A,{onClick:function(){return X(t)}},i.createElement(k.g,{icon:["fas","plus"]}))),i.createElement(p.A,{title:"Force Refresh"},i.createElement(f.A,{onClick:function(){return n()},disabled:o},i.createElement(k.g,{className:"fa ".concat(o?"fa-spin":""),icon:["fas","arrows-rotate"]}))),i.createElement(p.A,{title:"Home"},i.createElement(f.A,{onClick:function(){L.goBack()}},i.createElement(k.g,{icon:["fas","house"]}))))),i.createElement(w.aF,{open:P,title:"My Employment",onClose:function(){return U(null)},onDelete:j?null:function(){return Q(!0)},deleteLang:"Quit"},i.createElement(b.A,null,i.createElement(E.Ay,null,i.createElement(A.A,{primary:"Job",secondary:N.Name})),j&&i.createElement(E.Ay,null,i.createElement(A.A,{primary:"Owner",secondary:"You Are the Owner"})),N.Workplace&&i.createElement(E.Ay,null,i.createElement(A.A,{primary:"Workplace",secondary:N.Workplace.Name})),i.createElement(E.Ay,null,i.createElement(A.A,{primary:"Grade",secondary:N.Grade.Name})))),!j&&i.createElement(w.pT,{title:"Quit ".concat(y.Name,"?"),open:z,confirm:"Yes",decline:"No",onConfirm:ae,onDecline:function(){return Q(!1)}})),y.Workplaces?y.Workplaces.map((function(e){return i.createElement(x.default,{key:e.Id,workplace:e,jobData:y,playerJob:N,onEmployeeClick:function(e){return X(O(O({},e),{},{SID:e.SID,Job:e.JobData,edit:!0}))}})})):i.createElement(x.default,{workplace:!1,jobData:y,playerJob:N,onEmployeeClick:function(e){return X(O(O({},e),{},{SID:e.SID,Job:e.JobData,edit:!0}))}}),B&&Boolean(K)&&i.createElement(w.aF,{form:!0,open:null!=K,title:null!=K&&K.edit?"Update Employment":"Hire Employee",onClose:function(){return X(null)},onAccept:re,onDelete:null!=K&&K.edit&&(T||R)&&(null==K?void 0:K.SID)!=C.SID?function(){return te(!0)}:null,deleteLang:"Fire"},Boolean(K)&&i.createElement(i.Fragment,null,i.createElement(h.A,{fullWidth:!0,required:!0,label:"State ID",name:"sid",className:G.editorField,value:K.SID,disabled:null==K?void 0:K.edit,onChange:function(e){return X(O(O({},K),{},{SID:e.target.value}))},type:"tel",isNumericString:!0,customInput:v.A}),y.Workplaces&&i.createElement(v.A,{select:!0,fullWidth:!0,label:"Workplace",className:G.editorField,value:K.Job.Workplace.Id,disabled:!T,onChange:function(e){return X(O(O({},K),{},{Job:O(O({},K.Job),{},{Workplace:y.Workplaces.filter((function(t){return t.Id==e.target.value}))[0],Grade:y.Workplaces.filter((function(t){return t.Id==e.target.value}))[0].Grades[0]})}))}},y.Workplaces.map((function(e,t){return i.createElement(I.A,{key:e.Id,value:e.Id},e.Name)}))),y.Workplaces?i.createElement(v.A,{select:!0,fullWidth:!0,label:"Grade",className:G.editorField,value:K.Job.Grade.Id,onChange:function(e){return X(O(O({},K),{},{Job:O(O({},K.Job),{},{Grade:y.Workplaces.filter((function(e){return e.Id==K.Job.Workplace.Id}))[0].Grades.filter((function(t){return t.Id==e.target.value}))[0]})}))}},y.Workplaces.filter((function(e){return e.Id==K.Job.Workplace.Id}))[0].Grades.sort((function(e,t){return e.Level-t.Level})).map((function(e,t){return i.createElement(I.A,{key:e.Id,value:e.Id,disabled:!j&&N.Grade.Level<=e.Level},e.Name)}))):i.createElement(v.A,{select:!0,fullWidth:!0,label:"Grade",className:G.editorField,value:K.Job.Grade.Id,onChange:function(e){return X(O(O({},K),{},{Job:O(O({},K.Job),{},{Grade:y.Grades.filter((function(t){return t.Id==e.target.value}))[0]})}))}},y.Grades.sort((function(e,t){return e.Level-t.Level})).map((function(e,t){return i.createElement(I.A,{key:e.Id,value:e.Id,disabled:!j&&N.Grade.Level<=e.Level},e.Name)}))))),Boolean(K)&&(null==K?void 0:K.edit)&&i.createElement(w.pT,{title:"Fire ".concat(K.First," ").concat(K.Last,"?"),open:ee,confirm:"Yes",decline:"No",onConfirm:ne,onDecline:function(){return te(!1)}}))}}}]);