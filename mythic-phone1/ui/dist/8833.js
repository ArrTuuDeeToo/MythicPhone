"use strict";(self.webpackChunkmythic_phone=self.webpackChunkmythic_phone||[]).push([[4832,8833],{68833:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(28407),r=n(73925),o=n(70232),l=n.n(o),i=n(55429),c=n(15647),s=n(64965),m=n(142),u=n(79111),d=n(32764),f=n(26573),p=n(74552),A=n(59530),h=n(84529),E=n(98433),g=n(87591),k=n(41655),v=n.n(k),x=n(61541),I=n(23470),b=n(84832),y=(0,p.A)((function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main,overflow:"hidden"},header:{background:e.palette.primary.main,fontSize:20,padding:15,lineHeight:"45px",height:78},headerAction:{textAlign:"right","&:hover":{color:e.palette.text.main,transition:"color ease-in 0.15s"}},item:{borderBottom:"1px solid ".concat(e.palette.border.divider)}}}));const w=function(e){var t=e.jobData,n=(e.playerJob,y()),o=(0,s.W6)(),p=(0,c.wA)(),k=(0,I.MW)(),w=(0,c.d4)((function(e){return e.com.timeWorked})),S=(0,c.d4)((function(e){return e.com.timeWorkedUpdated})),D=(0,c.d4)((function(e){return e.com.timeWorkedJob})),L=(0,i.useState)(!1),N=(0,r.A)(L,2),W=(N[0],N[1]),C=(0,i.useMemo)((function(){return(0,h.throttle)((0,a.A)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),e.prev=1,e.next=4,x.A.send("FetchTimeWorked",t.Id);case 4:return e.next=6,e.sent.json();case 6:if(!(n=e.sent)){e.next=11;break}p({type:"UPDATE_TIMEWORKED",payload:{timeWorked:n,timeWorkedJob:t.Id}}),e.next=12;break;case 11:throw n;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0),k("Unable to Load Time Worked");case 18:W(!1);case 19:case"end":return e.stop()}}),e,null,[[1,14]])}))),5e3)}),[]);(0,i.useEffect)((function(){(!w||Date.now()-S>=12e4||D!=t.Id)&&C()}),[]);var F,T,M=(0,i.useState)(null),R=(0,r.A)(M,2),j=R[0],O=R[1];return i.createElement("div",{className:n.wrapper},i.createElement(m.A,{position:"static",className:n.header},i.createElement(u.Ay,{container:!0},i.createElement(u.Ay,{item:!0,xs:11},i.createElement(E.A,{lines:1},t.Name)),i.createElement(u.Ay,{item:!0,xs:1,className:n.headerAction},i.createElement(d.A,{title:"Home"},i.createElement(f.A,{onClick:function(){o.goBack()}},i.createElement(A.g,{icon:["fas","house"]})))))),w&&w.length>0?w.map((function(e){return i.createElement(b.default,{key:e.SID,employee:e,jobData:t,onClick:function(t){return O(e)}})})):i.createElement(g.aH,{static:!0,text:"Loading"}),i.createElement(g.aF,{open:null!=j,title:"View Time Worked",onClose:function(){return O(null)},onAccept:null,onDelete:null},null!=j&&i.createElement(i.Fragment,null,i.createElement("p",null,j.First," ",j.Last," (",j.SID,")"),i.createElement("p",null,"Last Went on Duty: ",(F=j.LastClockOn,T=t.Id,F&&F[T]?"".concat(v()(1e3*F[T]).format("LLL")," (").concat(v()(1e3*F[T]).fromNow(),")"):"Never")),i.createElement("p",null,"Has worked ",function(e,t){if(e&&e[t]){var n=v()().subtract(7,"days").unix(),a=0;return e[t].forEach((function(e){e.time>=n&&(a+=e.minutes)})),a>0?v().duration(a,"minutes").humanize():"0 minutes"}return"0 minutes"}(j.TimeClockedOn,t.Id)," in the last week."))))}},84832:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(55429),r=n(15647),o=n(44557),l=n(20346),i=n(44686),c=n(85220),s=n(32764),m=n(74552),u=n(59530),d=(n(23470),(0,m.A)((function(e){return{item:{borderBottom:"1px solid ".concat(e.palette.border.divider),"&:first-child":{borderTop:"1px solid ".concat(e.palette.border.divider)}},avatar:{backgroundColor:e.palette.primary.main},myself:{fontSize:14,color:e.palette.info.main,marginRight:5},owner:{fontSize:14,color:"gold",marginRight:5}}})));const f=function(e){var t=e.jobData,n=(e.playerJob,e.employee),m=e.onClick,f=d(),p=(0,r.d4)((function(e){return e.data.data.player}));return a.createElement(o.Ay,{className:f.item,button:!0,onClick:function(){return m(n)}},a.createElement(l.A,null,a.createElement(i.A,{className:f.avatar},a.createElement(u.g,{icon:["fas","user"]}))),a.createElement(c.A,{primary:a.createElement("span",null,p.SID==n.SID?a.createElement(s.A,{title:"You"},a.createElement("span",null,a.createElement(u.g,{className:f.myself,icon:["fas","user"]}))):(null==t?void 0:t.Owner)==n.SID?a.createElement(s.A,{title:"Business Owner"},a.createElement("span",null,a.createElement(u.g,{className:f.owner,icon:["fas","crown"]}))):null,"".concat(n.First," ").concat(n.Last)),secondary:"State ID: ".concat(n.SID)}))}},20346:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(86887),r=n(64180),o=n(55429),l=n(1551),i=n(50035),c=n(33505),s=n(93119),m=n(88594),u=n(35457);function d(e){return(0,u.A)("MuiListItemAvatar",e)}(0,n(40725).A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var f=n(64922);const p=["className"],A=(0,s.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((({ownerState:e})=>(0,r.A)({minWidth:56,flexShrink:0},"flex-start"===e.alignItems&&{marginTop:8}))),h=o.forwardRef((function(e,t){const n=(0,m.A)({props:e,name:"MuiListItemAvatar"}),{className:s}=n,u=(0,a.A)(n,p),h=o.useContext(c.A),E=(0,r.A)({},n,{alignItems:h.alignItems}),g=(e=>{const{alignItems:t,classes:n}=e,a={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,i.A)(a,d,n)})(E);return(0,f.jsx)(A,(0,r.A)({className:(0,l.A)(g.root,s),ownerState:E,ref:t},u))}))}}]);